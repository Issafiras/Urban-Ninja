<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Urban Ninja - Web App</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Apple Touch Icon for iOS -->
    <link rel="apple-touch-icon" href="icon-192x192.png">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>

    <!-- Leaflet Routing Machine CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />

    <!-- Custom Styles -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Map Container -->
    <div id="map"></div>

    <!-- Advanced Visual Effects -->
    <div class="matrix-rain" id="matrixRain"></div>
    <div class="particle-container" id="particleContainer"></div>

    <!-- Augmented Reality Overlay -->
    <div class="ar-overlay" id="arOverlay">
        <div class="ar-compass" id="arCompass"></div>
        <div class="ar-navigation-hint" id="arNavigationHint">AR Navigation: F√∏lg den neon-bl√• rute</div>
    </div>

    <!-- Offline Status Indicator -->
    <div class="offline-indicator" id="offlineIndicator">OFFLINE MODE</div>

    <!-- Social Panel -->
    <div class="social-panel" id="socialPanel">
        <h3>ü´Ç NINJA SOCIAL</h3>
        <div id="buddyList">
            <div class="leaderboard-entry">S√∏ger efter ninja buddies...</div>
        </div>
        <button class="route-share-button" id="shareRouteButton">üöÄ DEL RUTE</button>
        <button class="route-share-button" id="findBuddiesButton">üéØ FIND BUDDIES</button>
        <div id="leaderboard">
            <h4 style="color: #FF1493; margin: 10px 0 5px 0; font-size: 14px;">ü•á LEADERBOARD</h4>
            <div id="leaderboardContent">
                <div class="leaderboard-entry gold">üèÜ ShadowMaster - 15,420km</div>
                <div class="leaderboard-entry silver">ü•à NightRunner - 12,890km</div>
                <div class="leaderboard-entry bronze">ü•â CyberNinja - 11,245km</div>
                <div class="leaderboard-entry">‚ö° StealthFox - 9,876km</div>
                <div class="leaderboard-entry">üåô DarkPhantom - 8,543km</div>
            </div>
        </div>
    </div>

    <!-- Apple Integration Panel -->
    <div class="apple-integration-panel" id="appleIntegrationPanel">
        <h3>Ô£ø APPLE INTEGRATION</h3>
        <div class="apple-style-card">
            <strong>Apple Maps</strong><br/>
            <small>√Öbn rute i Apple Maps for ultimativ navigation</small>
        </div>
        <button class="apple-maps-button" id="openInAppleMapsButton">üó∫Ô∏è √ÖBN I APPLE MAPS</button>
        <button class="apple-maps-button" id="shareWithSiriButton">üé§ DEL MED SIRI</button>
        <button class="apple-maps-button" id="carplayModeButton">üöó CARPLAY MODE</button>
    </div>

    <!-- Apple UI Elements -->
    <div class="carplay-indicator" id="carplayIndicator">CARPLAY ACTIVE</div>
    <div class="siri-suggestion" id="siriSuggestion">Sig "Hey Siri, start Urban Ninja navigation"</div>

    <!-- Control Panel / Wizard -->
    <div class="control-panel liquid-button" role="region" aria-label="Urban Ninja Controls">
        <h2>URBAN NINJA</h2>

        <!-- Step 1: Start Point -->
        <div id="wizard-step-1" class="wizard-step">
            <h3 style="color: #00FFFF; margin: 10px 0; font-size: 14px;">1. START POINT</h3>
            <div style="position: relative;">
                <input type="text" id="startInput" class="address-input" placeholder="Start address..." autocomplete="off">
                <div id="startSuggestions" class="address-suggestions" role="listbox"></div>
            </div>
            <button id="useLocationBtn" class="ninja-toggle locate-button" style="margin-top: 10px;">
                FIND MIG (GPS)
            </button>
            <button id="step1Next" class="ninja-toggle next-button" style="margin-top: 10px;">
                NEXT >
            </button>
        </div>

        <!-- Step 2: Destination -->
        <div id="wizard-step-2" class="wizard-step" style="display: none;">
            <h3 style="color: #00FFFF; margin: 10px 0; font-size: 14px;">2. TARGET</h3>
            <div style="position: relative;">
                <input type="text" id="destInput" class="address-input" placeholder="Destination address..." autocomplete="off">
                <div id="destSuggestions" class="address-suggestions" role="listbox"></div>
            </div>
            <div style="display: flex; gap: 5px; margin-top: 10px;">
                <button id="step2Back" class="ninja-toggle back-button" style="width: 40%;"><</button>
                <button id="step2Next" class="ninja-toggle next-button" style="width: 60%;">NEXT ></button>
            </div>
        </div>

        <!-- Step 3: Hacks -->
        <div id="wizard-step-3" class="wizard-step" style="display: none;">
            <h3 style="color: #00FFFF; margin: 10px 0; font-size: 14px;">3. ACTIVATE HACKS</h3>
            <div class="hacks-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px;">
                <button class="hack-toggle ninja-toggle" data-hack="ninja">NINJA MODE</button>
                <button class="hack-toggle ninja-toggle" data-hack="aggressive">AGGRESSIVE</button>
                <button class="hack-toggle ninja-toggle" data-hack="stealth">STEALTH</button>
                <button class="hack-toggle ninja-toggle" data-hack="nightvision">NIGHT VISION</button>
                <button class="hack-toggle ninja-toggle" data-hack="voice">VOICE CMD</button>
                <button class="hack-toggle ninja-toggle" data-hack="predictive">PREDICTIVE</button>
                <button class="hack-toggle ninja-toggle" data-hack="ar">AR OVERLAY</button>
                <button class="hack-toggle ninja-toggle" data-hack="social">SOCIAL</button>
            </div>
            <div style="display: flex; gap: 5px; margin-top: 10px;">
                <button id="step3Back" class="ninja-toggle back-button" style="width: 30%;"><</button>
                <button id="startMissionBtn" class="ninja-toggle start-mission-button" style="width: 70%; background: linear-gradient(45deg, #00FF80, #008040);">START MISSION</button>
            </div>
        </div>

        <!-- Active Mission Controls -->
        <div id="mission-controls" style="display: none;">
            <div class="status" id="status" role="status" aria-live="polite">Routing...</div>
            <div class="progress-container" id="progressContainer" role="progressbar" aria-label="Routing progress">
                <div class="progress-bar" id="progressBar"></div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 5px; margin-top: 10px;">
                 <button id="googleMapsButton" class="ninja-toggle" title="√Öbn i Google Maps">GOOGLE MAPS</button>
                 <button id="appleModeButton" class="ninja-toggle apple-button" title="Apple Integration">APPLE MODE</button>
            </div>

            <button id="newMissionBtn" class="ninja-toggle" style="margin-top: 10px; background: linear-gradient(45deg, #FF6B6B, #FF4444);">NEW MISSION</button>
        </div>

    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>

    <!-- Leaflet Routing Machine JS -->
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>

    <!-- Custom JavaScript -->
    <script src="app.js"></script>
</body>
</html>